package mycastle;

import java.util.HashMap;
import java.util.Scanner;

public class Game {
	private Room currentroom ;
	private HashMap<String ,Handler> handler =new HashMap<String ,Handler>();
	public Game()
	{
		creatRoom();
		handler.put("向", new HandlerGo());
		handler.put("再见", new HandlerBye());
		handler.put("帮助", new HandlerHelp());
		
	}
	
	public void creatRoom(){
		Room outside,lobby,hall,study,kitchen,toilet,bedroom,guestroom;
		outside=new Room("城堡外");
		lobby=new Room("走廊");
		hall=new Room("大厅");		
		study=new Room("书房");
		kitchen=new Room("厨房");
		toilet=new Room("厕所");
		bedroom=new Room("卧室");
		guestroom=new Room("客房");
		
		outside.setDoor("北", lobby);
		lobby.setDoor("北", hall);
		hall.setDoor("南", lobby);
		hall.setDoor("东", kitchen);
		hall.setDoor("北", toilet);
		hall.setDoor("西", study);
		study.setDoor("东", hall);
		kitchen.setDoor("西", hall);
		toilet.setDoor("东", guestroom);
		toilet.setDoor("南", hall);
		toilet.setDoor("西", bedroom);
		bedroom.setDoor("东", toilet);
		guestroom.setDoor("西", toilet);
		currentroom=outside;
	}
	public void wellcome(){
		System.out.println("欢迎来到这个无聊的城堡游戏");
		System.out.println("可使用“帮助”，或“再见”");
		this.showprompt();
	}
	public void showprompt(){
		System.out.println("你现在在"+currentroom.showName());
		System.out.println("出口有"+currentroom.showDoor());
		System.out.println("请使用方向语句如（向东）移动");
	}
	public void outdoor(String dir){
		this.currentroom = currentroom.exit(dir);
		showprompt();
	}
	
	
	public void start(){
		Scanner in = new Scanner(System.in);
		while(true){
			String[] words = in.nextLine().split("");
			Handler hd =handler.get(words[0]);
			String value ="";
			if (words.length>1){
				value = words[1];
			}
			if(hd!=null){
				hd.doCmd(value);
				if(hd.bye()){
					break;
				}
			}
		}
		System.out.println("感谢参与游戏");	
		in.close();
	}
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Game g = new Game();
		g.wellcome();
		g.start();

	}

}
